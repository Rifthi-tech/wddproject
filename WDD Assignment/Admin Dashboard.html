<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Css/Admin Dashboard.css">
    <title>Admin Dashboard</title>
</head>
<body>
    <!--navbar-->
    <div class="navbar">
        <div class="main-logo">
            <a href="Customer.html"><img src="Images/LOGO.png" alt="Logo"></a>
        </div>
        <h1>TOOL TITAN</h1>
        <div class="profile">
            <img src="Images/OIP (7).jpeg" alt="Profile Picture">
        </div>
    </div>
    
    <!--2nd navbar-->
    <div class="navbar-link">
        <div><a href="#" onclick="showSection('products')">Total Products</a></div>
        <div><a href="#" onclick="showSection('customers')">Total Customers</a></div>
        <div><a href="#" onclick="showSection('suppliers')">Total Suppliers</a></div>
        <div><a href="#" onclick="showSection('orders')">Total Orders</a></div>
    </div>
    
    <!--body-->
    <div id="products-section" class="main-product">
        <div class="product">
            <h3>Products Details</h3>
            <button type="button" onclick="openProductModal('add')">Add Products</button>
        </div>
        <div class="tbl">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Price</th>
                        <th>Stock Quality</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="products-table-body">
                    <!-- Products will be added here dynamically -->
                </tbody>
            </table>
        </div>
    </div>

    <div id="customers-section" class="main-product" style="display: none;">
        <div class="product">
            <h3>Customer Details</h3>
            <button type="button" onclick="openCustomerModal('add')">Add Customer</button>
        </div>
        <div class="tbl">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Address</th>
                        <th>History</th>
                    </tr>
                </thead>
                <tbody id="customers-table-body">
                    <!-- Customers will be added here dynamically -->
                </tbody>
            </table>
        </div>
    </div>

    <div id="suppliers-section" class="main-product" style="display: none;">
        <div class="product">
            <h3>Suppliers Details</h3>
            <button type="button" onclick="openSupplierModal('add')">Add Suppliers</button>
        </div>
        <div class="tbl">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Contact</th>
                        <th>Address</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="suppliers-table-body">
                    <!-- Suppliers will be added here dynamically -->
                </tbody>
            </table>
        </div>
    </div>

    <div id="orders-section" class="main-product" style="display: none;">
        <div class="product">
            <h3>Orders Details</h3>
        </div>
        <div class="tbl">
            <table>
                <thead>
                    <tr>
                        <th>Customer</th>
                        <th>Order Date</th>
                        <th>Total Amount</th>
                        <th>Shipping History</th>
                    </tr>
                </thead>
                <tbody id="orders-table-body">
                    <!-- Orders will be added here dynamically -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Product Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="product-modal-title">Add Product</h2>
                <span class="close-btn" onclick="closeModal('product-modal')">&times;</span>
            </div>
            <form id="product-form">
                <input type="hidden" id="product-id">
                <div class="form-group">
                    <label for="product-name">Name</label>
                    <input type="text" id="product-name" required>
                </div>
                <div class="form-group">
                    <label for="product-description">Description</label>
                    <textarea id="product-description" required></textarea>
                </div>
                <div class="form-group">
                    <label for="product-price">Price</label>
                    <input type="number" id="product-price" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="product-stock">Stock Quantity</label>
                    <input type="number" id="product-stock" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('product-modal')">Cancel</button>
                    <button type="submit" class="btn-submit">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Customer Modal -->
    <div id="customer-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="customer-modal-title">Add Customer</h2>
                <span class="close-btn" onclick="closeModal('customer-modal')">&times;</span>
            </div>
            <form id="customer-form">
                <input type="hidden" id="customer-id">
                <div class="form-group">
                    <label for="customer-name">Name</label>
                    <input type="text" id="customer-name" required>
                </div>
                <div class="form-group">
                    <label for="customer-email">Email</label>
                    <input type="email" id="customer-email" required>
                </div>
                <div class="form-group">
                    <label for="customer-phone">Phone</label>
                    <input type="tel" id="customer-phone" required>
                </div>
                <div class="form-group">
                    <label for="customer-address">Address</label>
                    <textarea id="customer-address" required></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('customer-modal')">Cancel</button>
                    <button type="submit" class="btn-submit">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Customer History Modal -->
    <div id="customer-history-modal" class="modal">
        <div class="modal-content" style="width: 700px;">
            <div class="modal-header">
                <h2 id="customer-history-modal-title">Customer History</h2>
                <span class="close-btn" onclick="closeModal('customer-history-modal')">&times;</span>
            </div>
            <div class="history-section">
                <h3>Purchase History</h3>
                <div id="customer-purchase-history">
                    <!-- Purchase history will be added here dynamically -->
                </div>
            </div>
            <div class="form-actions">
                <button type="button" class="btn-cancel" onclick="closeModal('customer-history-modal')">Close</button>
            </div>
        </div>
    </div>

    <!-- Supplier Modal -->
    <div id="supplier-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="supplier-modal-title">Add Supplier</h2>
                <span class="close-btn" onclick="closeModal('supplier-modal')">&times;</span>
            </div>
            <form id="supplier-form">
                <input type="hidden" id="supplier-id">
                <div class="form-group">
                    <label for="supplier-name">Name</label>
                    <input type="text" id="supplier-name" required>
                </div>
                <div class="form-group">
                    <label for="supplier-contact">Contact</label>
                    <input type="text" id="supplier-contact" required>
                </div>
                <div class="form-group">
                    <label for="supplier-address">Address</label>
                    <textarea id="supplier-address" required></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('supplier-modal')">Cancel</button>
                    <button type="submit" class="btn-submit">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="order-modal" class="modal">
        <div class="modal-content" style="width: 700px;">
            <div class="modal-header">
                <h2 id="order-modal-title">Order Details</h2>
                <span class="close-btn" onclick="closeModal('order-modal')">&times;</span>
            </div>
            <div style="margin-bottom: 20px;">
                <h3>Customer Information</h3>
                <p><strong>Name:</strong> <span id="order-customer-name"></span></p>
                <p><strong>Email:</strong> <span id="order-customer-email"></span></p>
                <p><strong>Address:</strong> <span id="order-customer-address"></span></p>
            </div>
            
            <div style="margin-bottom: 20px;">
                <h3>Order Items</h3>
                <table style="width: 100%; margin-bottom: 15px;">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody id="order-items">
                        <!-- Order items will be added here -->
                    </tbody>
                </table>
            </div>
            
            <div style="text-align: right; margin-bottom: 20px;">
                <p><strong>Subtotal:</strong> LKR <span id="order-subtotal">0.00</span></p>
                <p><strong>Total:</strong> LKR <span id="order-total">0.00</span></p>
            </div>
            
            <div class="history-section">
                <h3>Shipping History</h3>
                <div id="shipping-history">
                    <!-- Shipping history will be added here dynamically -->
                </div>
            </div>
            
            <div class="form-actions">
                <button type="button" class="btn-cancel" onclick="closeModal('order-modal')">Close</button>
            </div>
        </div>
    </div>

    <script>
        // Sample data (in a real app, this would come from a database)
        let products = [
            { id: '001', name: 'Power Drill', description: 'Heavy duty power drill with 20V battery', price: 129.99, stock: 50 },
            { id: '002', name: 'Hammer', description: 'Professional claw hammer with fiberglass handle', price: 24.99, stock: 120 }
        ];
        
        let customers = [
            { 
                id: '001', 
                name: 'John Smith', 
                email: 'john@example.com', 
                phone: '555-123-4567', 
                address: '123 Main St',
                history: [
                    { date: '2025-01-15', action: 'Purchased Power Drill', amount: 'LKR 129.99' },
                    { date: '2025-01-10', action: 'Created account', amount: '' }
                ]
            },
            { 
                id: '002', 
                name: 'Sarah Johnson', 
                email: 'sarah@example.com', 
                phone: '555-987-6543', 
                address: '456 Oak Ave',
                history: [
                    { date: '2025-01-05', action: 'Purchased Hammer (x2)', amount: 'LKR 49.98' },
                    { date: '2025-01-01', action: 'Created account', amount: '' }
                ]
            }
        ];
        
        let suppliers = [
            { id: '001', name: 'Tools R Us', contact: 'Mike Brown', address: '789 Industrial Park' },
            { id: '002', name: 'Hardware World', contact: 'Lisa Green', address: '321 Commerce Blvd' }
        ];
        
        let orders = [
            { 
                id: 'ORD-001', 
                customerId: '001', 
                date: '2025-01-15', 
                total: 154.98,
                items: [
                    { productId: '001', name: 'Power Drill', quantity: 1, price: 129.99 },
                    { productId: '002', name: 'Hammer', quantity: 1, price: 24.99 }
                ],
                shippingHistory: [
                    { date: '2025-01-15', status: 'Order placed', location: '' },
                    { date: '2025-01-16', status: 'Processing', location: 'Warehouse' },
                    { date: '2025-01-17', status: 'Shipped', location: 'UPS' }
                ]
            },
            { 
                id: 'ORD-002', 
                customerId: '002', 
                date: '2025-01-10', 
                total: 49.98,
                items: [
                    { productId: '002', name: 'Hammer', quantity: 2, price: 24.99 }
                ],
                shippingHistory: [
                    { date: '2025-01-10', status: 'Order placed', location: '' },
                    { date: '2025-01-11', status: 'Delivered', location: 'Customer address' }
                ]
            }
        ];

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            renderProducts();
            renderCustomers();
            renderSuppliers();
            renderOrders();
            
            // Set up form submissions
            document.getElementById('product-form').addEventListener('submit', handleProductSubmit);
            document.getElementById('customer-form').addEventListener('submit', handleCustomerSubmit);
            document.getElementById('supplier-form').addEventListener('submit', handleSupplierSubmit);
        });
        
        // Navigation functions
        function showSection(section) {
            document.getElementById('products-section').style.display = 'none';
            document.getElementById('customers-section').style.display = 'none';
            document.getElementById('suppliers-section').style.display = 'none';
            document.getElementById('orders-section').style.display = 'none';
            
            document.getElementById(section + '-section').style.display = 'block';
        }
        
        // Product functions
        function renderProducts() {
            const tbody = document.getElementById('products-table-body');
            tbody.innerHTML = '';
            
            products.forEach(product => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${product.name}</td>
                    <td>${product.description}</td>
                    <td>LKR ${product.price.toFixed(2)}</td>
                    <td>${product.stock}</td>
                    <td>
                        <button class="action" onclick="openProductModal('edit', '${product.id}')">Update</button>
                        <button class="action" onclick="deleteProduct('${product.id}')">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function openProductModal(action, productId = null) {
            const modal = document.getElementById('product-modal');
            const form = document.getElementById('product-form');
            
            if (action === 'add') {
                document.getElementById('product-modal-title').textContent = 'Add Product';
                form.reset();
                document.getElementById('product-id').value = '';
            } else {
                document.getElementById('product-modal-title').textContent = 'Edit Product';
                const product = products.find(p => p.id === productId);
                
                document.getElementById('product-id').value = product.id;
                document.getElementById('product-name').value = product.name;
                document.getElementById('product-description').value = product.description;
                document.getElementById('product-price').value = product.price;
                document.getElementById('product-stock').value = product.stock;
            }
            
            modal.style.display = 'flex';
        }
        
        function handleProductSubmit(e) {
            e.preventDefault();
            
            const id = document.getElementById('product-id').value;
            const name = document.getElementById('product-name').value;
            const description = document.getElementById('product-description').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const stock = parseInt(document.getElementById('product-stock').value);
            
            if (id) {
                // Update existing product
                const index = products.findIndex(p => p.id === id);
                products[index] = { id, name, description, price, stock };
            } else {
                // Add new product
                const newId = (products.length + 1).toString().padStart(3, '0');
                products.push({ id: newId, name, description, price, stock });
            }
            
            renderProducts();
            closeModal('product-modal');
        }
        
        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                products = products.filter(p => p.id !== productId);
                renderProducts();
            }
        }
        
        // Customer functions
        function renderCustomers() {
            const tbody = document.getElementById('customers-table-body');
            tbody.innerHTML = '';
            
            customers.forEach(customer => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${customer.name}</td>
                    <td>${customer.email}</td>
                    <td>${customer.phone}</td>
                    <td>${customer.address}</td>
                    <td><button class="action" onclick="viewCustomerHistory('${customer.id}')">View History</button></td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function openCustomerModal(action, customerId = null) {
            const modal = document.getElementById('customer-modal');
            const form = document.getElementById('customer-form');
            
            if (action === 'add') {
                document.getElementById('customer-modal-title').textContent = 'Add Customer';
                form.reset();
                document.getElementById('customer-id').value = '';
            } else {
                document.getElementById('customer-modal-title').textContent = 'Edit Customer';
                const customer = customers.find(c => c.id === customerId);
                
                document.getElementById('customer-id').value = customer.id;
                document.getElementById('customer-name').value = customer.name;
                document.getElementById('customer-email').value = customer.email;
                document.getElementById('customer-phone').value = customer.phone;
                document.getElementById('customer-address').value = customer.address;
            }
            
            modal.style.display = 'flex';
        }
        
        function viewCustomerHistory(customerId) {
            const customer = customers.find(c => c.id === customerId);
            document.getElementById('customer-history-modal-title').textContent = `${customer.name}'s History`;
            
            const historyContainer = document.getElementById('customer-purchase-history');
            historyContainer.innerHTML = '';
            
            customer.history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <p><strong>${item.date}</strong> - ${item.action} ${item.amount ? `(${item.amount})` : ''}</p>
                `;
                historyContainer.appendChild(historyItem);
            });
            
            document.getElementById('customer-history-modal').style.display = 'flex';
        }
        
        function handleCustomerSubmit(e) {
            e.preventDefault();
            
            const id = document.getElementById('customer-id').value;
            const name = document.getElementById('customer-name').value;
            const email = document.getElementById('customer-email').value;
            const phone = document.getElementById('customer-phone').value;
            const address = document.getElementById('customer-address').value;
            
            if (id) {
                // Update existing customer
                const index = customers.findIndex(c => c.id === id);
                customers[index] = { 
                    ...customers[index],
                    name, 
                    email, 
                    phone, 
                    address 
                };
            } else {
                // Add new customer
                const newId = (customers.length + 1).toString().padStart(3, '0');
                customers.push({ 
                    id: newId, 
                    name, 
                    email, 
                    phone, 
                    address,
                    history: [
                        { date: new Date().toISOString().split('T')[0], action: 'Created account', amount: '' }
                    ]
                });
            }
            
            renderCustomers();
            closeModal('customer-modal');
        }
        
        // Supplier functions
        function renderSuppliers() {
            const tbody = document.getElementById('suppliers-table-body');
            tbody.innerHTML = '';
            
            suppliers.forEach(supplier => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${supplier.name}</td>
                    <td>${supplier.contact}</td>
                    <td>${supplier.address}</td>
                    <td>
                        <button class="action" onclick="openSupplierModal('edit', '${supplier.id}')">Update</button>
                        <button class="action" onclick="deleteSupplier('${supplier.id}')">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function openSupplierModal(action, supplierId = null) {
            const modal = document.getElementById('supplier-modal');
            const form = document.getElementById('supplier-form');
            
            if (action === 'add') {
                document.getElementById('supplier-modal-title').textContent = 'Add Supplier';
                form.reset();
                document.getElementById('supplier-id').value = '';
            } else {
                document.getElementById('supplier-modal-title').textContent = 'Edit Supplier';
                const supplier = suppliers.find(s => s.id === supplierId);
                
                document.getElementById('supplier-id').value = supplier.id;
                document.getElementById('supplier-name').value = supplier.name;
                document.getElementById('supplier-contact').value = supplier.contact;
                document.getElementById('supplier-address').value = supplier.address;
            }
            
            modal.style.display = 'flex';
        }
        
        function handleSupplierSubmit(e) {
            e.preventDefault();
            
            const id = document.getElementById('supplier-id').value;
            const name = document.getElementById('supplier-name').value;
            const contact = document.getElementById('supplier-contact').value;
            const address = document.getElementById('supplier-address').value;
            
            if (id) {
                // Update existing supplier
                const index = suppliers.findIndex(s => s.id === id);
                suppliers[index] = { id, name, contact, address };
            } else {
                // Add new supplier
                const newId = (suppliers.length + 1).toString().padStart(3, '0');
                suppliers.push({ id: newId, name, contact, address });
            }
            
            renderSuppliers();
            closeModal('supplier-modal');
        }
        
        function deleteSupplier(supplierId) {
            if (confirm('Are you sure you want to delete this supplier?')) {
                suppliers = suppliers.filter(s => s.id !== supplierId);
                renderSuppliers();
            }
        }
        
        // Order functions
        function renderOrders() {
            const tbody = document.getElementById('orders-table-body');
            tbody.innerHTML = '';
            
            orders.forEach(order => {
                const customer = customers.find(c => c.id === order.customerId);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${customer.name}</td>
                    <td>${order.date}</td>
                    <td>LKR ${order.total.toFixed(2)}</td>
                    <td><button class="action" onclick="viewOrderDetails('${order.id}')">View Shipping</button></td>
                `;
                tbody.appendChild(row);
            });
        }
        
        function viewOrderDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            const customer = customers.find(c => c.id === order.customerId);
            
            document.getElementById('order-modal-title').textContent = `Order Details`;
            document.getElementById('order-customer-name').textContent = customer.name;
            document.getElementById('order-customer-email').textContent = customer.email;
            document.getElementById('order-customer-address').textContent = customer.address;
            
            const itemsTable = document.getElementById('order-items');
            itemsTable.innerHTML = '';
            
            let subtotal = 0;
            order.items.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.quantity}</td>
                    <td>LKR ${item.price.toFixed(2)}</td>
                    <td>LKR ${(item.price * item.quantity).toFixed(2)}</td>
                `;
                itemsTable.appendChild(row);
                subtotal += item.price * item.quantity;
            });
            
            document.getElementById('order-subtotal').textContent = subtotal.toFixed(2);
            document.getElementById('order-total').textContent = order.total.toFixed(2);
            
            // Add shipping history
            const shippingHistory = document.getElementById('shipping-history');
            shippingHistory.innerHTML = '';
            
            order.shippingHistory.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <p><strong>${item.date}</strong> - ${item.status} ${item.location ? `(${item.location})` : ''}</p>
                `;
                shippingHistory.appendChild(historyItem);
            });
            
            document.getElementById('order-modal').style.display = 'flex';
        }
        
        // Utility functions
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
    </script>
</body>
</html>